
<!-- TODO add aggressor selection/addition -->
<!-- TODO add evidence uploading to S3 -->
<template name="addReport">
    {{#if currentUser}}
        {{> reportForm}}
    {{else}}
        {{> accessDenied}}
    {{/if}}
</template>

<template name="reportForm">
    <form class="main form page" id="formAddReport">
        <div class="form-group">

            {{#with field="title"}}
                {{> displayError}}
            {{/with}}

            <label class="control-label" for="title">Title</label>
            <div class="controls">
                <input name="title" id="title" type="text" value="{{title}}" placeholder="Your Title" class="form-control"/>
            </div>
        </div>

        <div class="form-group">

            {{#with field="eventDate"}}
                {{> displayError}}
            {{/with}}

            <label class="control-label" for="eventDate">Event Date</label>
            <div class="controls">
                <div class="input-group datetimepicker">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                    <input class="set-due-date form-control" name="eventDate" type="text"/>
                </div>
            </div>
        </div>

        <div class="form-group">

            {{#with field="explanation"}}
                {{> displayError}}
            {{/with}}

            <label class="control-label" for="explanation">Explanation</label>
            <div class="controls">
                <textarea class="form-control" rows="3" name="explanation" value="{{explanation}}" id="explanation"></textarea>
            </div>
        </div>

        <div class="form-group">

            {{#with field="kind"}}
                {{> displayError}}
            {{/with}}

            <label class="control-label" for="kind">Kind</label>
            <div class="controls">
                <select name="kind" id="kind" class="form-control">
                    <option selected="{{isEqual kind 'Harassment'}}">Harassment</option>
                    <option selected="{{isEqual kind 'Violence'}}">Violence</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <div class="controls">
                <label class="control-label" for="fileToUpload">Upload Photos</label>
                <input name="fileToUpload" type="file" id="fileToUpload" accept="image/*">
            </div>
        </div>

        <input type="submit" value="Submit" class="btn btn-primary"/>
        <div class="form-group">
            {{#if photos}}
            <h4>Photos Uploaded</h4>
            {{/if}}
            <div class="row">
                {{#each photos}}
                    <div class="col-sm-6 col-md-3">
                        <div class="thumbnail">


                            <img src="{{this}}"/>

                        </div>
                    </div>
                {{/each}}
            </div>
        </div>







    </form>
</template>


<template name="displayError">
    {{#if (errorsForField field)}}
        <div class="alert alert-danger" role="alert">
            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            {{errorsForField field}}
        </div>
    {{/if}}
</template>

<template name="progressBar">
    <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%;">
            <span class="sr-only">{{progress}}% Complete</span>
        </div>
    </div>
</template>